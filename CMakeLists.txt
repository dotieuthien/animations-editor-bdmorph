cmake_minimum_required(VERSION 2.6)

set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "${CMAKE_SOURCE_DIR}/cmake/Modules/")

PROJECT(kvf2d)
FIND_PACKAGE(Qt4 REQUIRED)
FIND_PACKAGE(OpenGL REQUIRED)
FIND_PACKAGE(SUITESPARESE REQUIRED)

SET(QT_USE_QTOPENGL TRUE)
INCLUDE(${QT_USE_FILE})

INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR} ${SUITESPARSE_INCLUDE_DIRS})
INCLUDE_DIRECTORIES(${EIGEN3_INCLUDE_DIR})
INCLUDE_DIRECTORIES(. ./GUI ./core ./utils)

SET(kvf2d_SOURCES 

	GUI/deformationscene.cpp GUI/main.cpp GUI/graphics_view.cpp	

	core/model2d.cpp core/KVF.cpp

	utils/cholmod_matrix.cpp utils/vector2d.cpp 

)

SET(kvf2d_HEADERS GUI/deformationscene.h)

QT4_WRAP_CPP(kvf2d_HEADERS_MOC ${kvf2d_HEADERS})

ADD_EXECUTABLE(kvf2d ${kvf2d_SOURCES} ${kvf2d_HEADERS_MOC})
TARGET_LINK_LIBRARIES(kvf2d ${QT_LIBRARIES} ${OPENGL_LIBRARIES} ${SUITESPARSE_LIBRARIES} )
